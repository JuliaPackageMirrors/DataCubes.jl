<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../img/favicon.ico">

	<title>Getting Started - DataCubes</title>

        <link href="../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../css/font-awesome-4.5.0.css" rel="stylesheet">
        <link href="../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="../css/highlight.css">

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

        
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            

            <!-- Main title -->
            <a class="navbar-brand" href="..">DataCubes</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                
                
                    <li >
                        <a href="..">Home</a>
                    </li>
                
                
                
                    <li >
                        <a href="../introduction/">Introduction</a>
                    </li>
                
                
                
                    <li class="active">
                        <a href="./">Getting Started</a>
                    </li>
                
                
                
                    <li >
                        <a href="../where_to_look/">Where To Look</a>
                    </li>
                
                
                
                    <li >
                        <a href="../api/">API</a>
                    </li>
                
                
                </ul>
            

            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                        <i class="fa fa-search"></i> Search
                    </a>
                </li>
                
                    <li >
                        <a rel="next" href="../introduction/">
                            <i class="fa fa-arrow-left"></i> Previous
                        </a>
                    </li>
                    <li >
                        <a rel="prev" href="../where_to_look/">
                            Next <i class="fa fa-arrow-right"></i>
                        </a>
                    </li>
                
                
            </ul>
        </div>
    </div>
</div>

        <div class="container">
            
                <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="main active"><a href="#getting-started">Getting Started</a></li>
        
            <li><a href="#installation">Installation</a></li>
        
            <li><a href="#using-the-datacubes-package">Using the DataCubes package</a></li>
        
            <li><a href="#creating-a-multidimensional-table">Creating a multidimensional table</a></li>
        
            <li><a href="#manipulating-labeledarray">Manipulating LabeledArray</a></li>
        
    
    </ul>
</div></div>
                <div class="col-md-9" role="main">

<h2 id="getting-started">Getting Started</h2>
<h3 id="installation">Installation</h3>
<p>To install <code>DataCubes</code>, at the Julia REPL:</p>
<pre><code class="julia">Pkg.add(&quot;DataCubes&quot;)
</code></pre>

<h3 id="using-the-datacubes-package">Using the DataCubes package</h3>
<p>To use <code>DataCubes</code>,</p>
<pre><code class="julia">using DataCubes
</code></pre>

<p>This will introduce the core functions into namespace.
A few helper functions have the form <code>dcube.*</code> and they can be introduced into namespace as well by:</p>
<pre><code class="julia">using DataCubes.Tools
</code></pre>

<p>Below, we assume you already executed <code>using DataCubes</code>.</p>
<h3 id="creating-a-multidimensional-table">Creating a multidimensional table</h3>
<h4 id="dictarray">DictArray</h4>
<p>A multidimensional table can be represented by either the <a href="../api/#type__dictarray.1"><code>DictArray</code></a> or <a href="../api/#type__labeledarray.1"><code>LabeledArray</code></a> data type.
A <code>DictArray</code> is an array of ordered dictionaries with the common keys, and represents a table with no speicial axis information.
A <code>LabeledArray</code> is a <code>DictArray</code> with an additional vector for each axis for their labels.
The macro <code>@darr</code> is used to create a <code>DictArray</code>:</p>
<pre><code class="julia">julia&gt; d = @darr(c1=[1,1,2], c2=[&quot;x&quot;, &quot;y&quot;, &quot;z&quot;])

3 DictArray

c1 c2 
------
1  x  
1  y  
2  z  
</code></pre>

<p>Note that this is a <em>one</em>-dimensional array. There are 3 elements in the array:</p>
<pre><code class="julia">julia&gt; for elem in d
         println(elem)
       end
DataCubes.LDict{Symbol,Nullable{T}}(:c1=&gt;Nullable(1),:c2=&gt;Nullable(&quot;x&quot;))
DataCubes.LDict{Symbol,Nullable{T}}(:c1=&gt;Nullable(1),:c2=&gt;Nullable(&quot;y&quot;))
DataCubes.LDict{Symbol,Nullable{T}}(:c1=&gt;Nullable(2),:c2=&gt;Nullable(&quot;z&quot;))
</code></pre>

<p><code>LDict</code> is an ordered dictionary. That is, it is similar to <code>Dict</code> but keeps track of the order of the insertion of elements. Each element has two keys <code>:c1</code> and <code>:c2</code>. Their values are all <code>Nullable</code>: the macro <code>@darr</code> wraps values appropriately by <code>Nullable</code> if they are not wrapped already.
To choose an element, e.g. <code>y</code> in the <code>DictArray</code> <code>d</code>, you can use <code>d[2][:c2]</code>.
To choose one field, a function <code>pick</code> is provided:</p>
<pre><code class="julia">julia&gt; pick(d, :c1)
3-element DataCubes.AbstractArrayWrapper{Nullable{Int64},1,Array{Nullable{Int64},1}}:
 Nullable(1)
 Nullable(1)
 Nullable(2)
</code></pre>

<p><code>pick</code> has many types of methods, and the meaning is different depending on the situation.
For example, to get a <code>DictArray</code> with only <code>c1</code> field, use <code>pick(d, [:c1])</code>.
An array access expression such as <code>d[2,:c2]</code> cannot be provided because the field name (<code>:c2</code>) can be actually any type. For example:</p>
<pre><code class="julia">julia&gt; d1 = @darr(:one=&gt;[1,2,3], 2=&gt;[:x,:y,:z], &quot;three&quot;=&gt;['u','v','w'])
3 DictArray

one 2 three 
------------
1   x u     
2   y v     
3   z w     
</code></pre>

<h4 id="labeledarray">LabeledArray</h4>
<p>A <code>LabeledArray</code> adds axes information to a <code>DictArray</code>.
A convenient way to create a <code>LabeledArray</code> by hand is using the macro <code>@larr</code>.
For example,</p>
<pre><code class="julia">julia&gt; t = @larr(c1=[1 ,1 ,2], c2=[&quot;x&quot;, &quot;y&quot;, &quot;z&quot;], axis1[k1=[10,11,12], k2=[:r1, :r2, :r3]])
3 LabeledArray

k1 k2 |c1 c2 
------+------
10 r1 |1  x  
11 r2 |1  y  
12 r3 |2  z  
</code></pre>

<p>Note the appearance of labels in the first column whose field names are <code>k1</code> and <code>k2</code>.
You can also construct a <code>LabeledArray</code> from a <code>DictArray</code> and axes labels:</p>
<pre><code class="julia">julia&gt; d = @darr(c1=[1 ,1 ,2], c2=[&quot;x&quot;, &quot;y&quot;, &quot;z&quot;])
3 DictArray

c1 c2 
------
1  x  
1  y  
2  z  


julia&gt; t = @larr(d, axis1[k=[:r1, :r2, :r3]])
3 LabeledArray

k  |c1 c2 
---+------
r1 |1  x  
r2 |1  y  
r3 |2  z  
</code></pre>

<p><code>peel(t)</code> will return the underlying <code>DictArray</code>, stripping off all axes information.
<code>pick(t, :c1)</code> will return the field value array of <code>c1</code>.</p>
<h4 id="multidimensional-tables">Multidimensional Tables</h4>
<p>Both <code>DictArray</code> and <code>LabeledArray</code> can be multidimensional.
For example,</p>
<pre><code class="julia">julia&gt; m = @larr(c1=[1 2;3 4;5 6],
                 c2=['a' 'b';'b' 'a';'a' 'a'],
                 axis1[k1=[&quot;x&quot;,&quot;y&quot;,&quot;z&quot;]],
                 axis2[r1=[:A,:B]])
3 x 2 LabeledArray

r1 |A     |B     
---+------+------
k1 |c1 c2 |c1 c2 
---+------+------
x  |1  a  |2  b  
y  |3  b  |4  a  
z  |5  a  |6  a  
</code></pre>

<p>You can choose elements in the array using usual array indexing expressions:</p>
<pre><code class="julia">julia&gt; m[2:3,2]
2 LabeledArray

k1 |c1 c2 
---+------
y  |4  a  
z  |6  a  
</code></pre>

<p>Many operations for multidimensional arrays are also applicable:</p>
<pre><code class="julia">julia&gt; transpose(m)
2 x 3 LabeledArray

k1 |x     |y     |z     
---+------+------+------
r1 |c1 c2 |c1 c2 |c1 c2 
---+------+------+------
A  |1  a  |3  b  |5  a  
B  |2  b  |4  a  |6  a  


julia&gt; sub(m, 1:2, 1:2)
2 x 2 LabeledArray

r1 |A     |B     
---+------+------
k1 |c1 c2 |c1 c2 
---+------+------
x  |1  a  |2  b  
y  |3  b  |4  a  
</code></pre>

<p>Some operations take slightly differnt set of arguments. For example, to sort a <code>LabeledArray</code> <code>m</code> along the first axis using the field <code>c2</code>:</p>
<pre><code class="julia">julia&gt; sort(m, 1, :c2)
3 x 2 LabeledArray

r1 |A     |B     
---+------+------
k1 |c1 c2 |c1 c2 
---+------+------
x  |1  a  |2  b  
z  |5  a  |6  a  
y  |3  b  |4  a  
</code></pre>

<h3 id="manipulating-labeledarray">Manipulating LabeledArray</h3>
<p>The macro <code>@select</code> uses a SQL-like syntax to transform one <code>LabeledArray</code> into another (or into a dictionary).
Let's use this <code>LabeledArray</code> <code>m</code> as an example:</p>
<pre><code class="julia">julia&gt; m = @larr(c1=[1 2;3 4;5 6],
                 c2=['a' 'b';'b' 'a';'a' 'a'],
                 c3=[10.0 NA;NA 12.0;20.0 20.0],
                 axis1[k1=[&quot;x&quot;,&quot;y&quot;,&quot;z&quot;]],
                 axis2[r1=[:A,:B]])
3 x 2 LabeledArray

r1 |A          |B          
---+-----------+-----------
k1 |c1 c2 c3   |c1 c2 c3   
---+-----------+-----------
x  |1  a  10.0 |2  b       
y  |3  b       |4  a  12.0 
z  |5  a  20.0 |6  a  20.0 
</code></pre>

<p>To select only the fields <code>c1</code> and <code>c2</code>,</p>
<pre><code class="julia">julia&gt; @select(m, :c1, :c2)
3 x 2 LabeledArray

r1 |A     |B     
---+------+------
k1 |c1 c2 |c1 c2 
---+------+------
x  |1  a  |2  b  
y  |3  b  |4  a  
z  |5  a  |6  a  
</code></pre>

<p>An example to create a new column from the existing one:</p>
<pre><code class="julia">julia&gt; @select(m, c=_c1 .* 2 .+ _c3)
3 x 2 LabeledArray

r1 |A    |B    
---+-----+-----
k1 |c    |c    
---+-----+-----
x  |12.0 |     
y  |     |20.0 
z  |30.0 |32.0 
</code></pre>

<p><code>_c1</code> refers to the <code>c1</code> field and <code>.*</code> does the component-wise multiplication.</p>
<p>To choose only relevant elements, use the <code>where[...]</code> expression,</p>
<pre><code class="julia">julia&gt; @select(m, :c1, :c2, where[_c2 .== 'b'])
2 x 2 LabeledArray

r1 |A     |B     
---+------+------
k1 |c1 c2 |c1 c2 
---+------+------
x  |      |2  b  
y  |3  b  |      
</code></pre>

<p><code>where[...]</code> can have many conditions inside <code>...</code>, and they will be applied sequentially.
Multiple <code>where[...]</code> are also possible, and they will be simply concatenated.</p>
<p>To group the array elements by some fields, use the <code>by[...]</code> expression,</p>
<pre><code class="julia">julia&gt; @select(m,c1=sum(_c1), c3=sum(_c3), by[:c2])
2 LabeledArray

c2 |c1 c3   
---+--------
a  |16 62.0 
b  |5  0.0  
</code></pre>

<p>You can provide multiple fields to group by:</p>
<pre><code class="julia">julia&gt; @select(m,c1=sum(_c1), c3=mean(_c3), by[:c2,c4=_c1 .&gt; 5])
3 LabeledArray

c2 c4    |c1 c3   
---------+--------
a  false |10 14.0 
a  true  |6  20.0 
b  false |5       
</code></pre>

<p>But it is also possible to group by the array in a multidimensional way:</p>
<pre><code class="julia">julia&gt; @select(m,c1=sum(_c1), c3=mean(_c3), by[:c2], by[c4=_c1 .&gt; 5])
2 x 2 LabeledArray

c4 |false      |true      
---+-----------+----------
c2 |c1    c3   |c1   c3   
---+-----------+----------
a  |10    14.0 |6    20.0 
b  |5          |          
</code></pre></div>
            
        </div>

        <footer class="col-md-12">
            <hr>
            
            <p>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>

        <script src="../js/jquery-1.10.2.min.js"></script>
        <script src="../js/bootstrap-3.0.3.min.js"></script>
        <script src="../js/highlight.pack.js"></script>
        <script>var base_url = '..';</script>
        <script data-main="../mkdocs/js/search.js" src="../mkdocs/js/require.js"></script>
        <script src="../js/base.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                        <h4 class="modal-title" id="exampleModalLabel">Search</h4>
                    </div>
                    <div class="modal-body">
                        <p>
                            From here you can search these documents. Enter
                            your search terms below.
                        </p>
                        <form role="form">
                            <div class="form-group">
                                <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                            </div>
                        </form>
                        <div id="mkdocs-search-results"></div>
                    </div>
                    <div class="modal-footer">
                    </div>
                </div>
            </div>
        </div>

    </body>
</html>
